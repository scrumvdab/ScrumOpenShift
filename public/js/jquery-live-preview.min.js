(function(e){e.fn.extend({livePreview:function(t){var n={trigger:"hover",targetWidth:1e3,targetHeight:800,viewWidth:300,viewHeight:200,position:"right",positionOffset:50};var t=e.extend(n,t);var r=t.viewWidth/t.targetWidth;var i=t.viewHeight/t.targetHeight;var s=1;var o="livepreview_dialog";if(typeof t.scale!="undefined")s=t.scale;else{if(r>i)s=r;else s=i}return this.each(function(){var n=t;var r=s;var i=e(this);var u=e(this).attr("href");var a=t.trigger;if(i.attr("data-trigger")){a=i.attr("data-trigger")}if(a!="click"){a="mouseenter";i.on("click",function(){e("#"+o).remove()})}i.on(a,function(){if(a=="click"&&e("#"+o).length==0){event.preventDefault()}var t=n.position;if(i.attr("data-position"))t=i.attr("data-position");var s=n.positionOffset;if(i.attr("data-positionOffset"))s=i.attr("data-positionOffset");if(i.attr("data-scale"))r=i.attr("data-scale");var f=e(this).offset();var l=e(this).width();var c=f.left+l+s;if(t=="left")c=f.left-n.viewWidth-s;var h=f.top-n.viewHeight/2;e("body").append('<div id="livepreview_dialog" class="'+t+'" style="display:none; padding:0px; left: '+c+"px; top:"+h+"px; width: "+n.viewWidth+"px; height: "+n.viewHeight+'px"><div class="livepreview-container" style="overflow:hidden; width: '+n.viewWidth+"px; height: "+n.viewHeight+'px"><iframe id="livepreview_iframe" src="'+u+'" style="height:'+n.targetHeight+"px; width:"+n.targetWidth+"px;-moz-transform: scale("+r+");-moz-transform-origin: 0 0;-o-transform: scale("+r+");-o-transform-origin: 0 0;-webkit-transform: scale("+r+');-webkit-transform-origin: 0 0;"></iframe></div></div>');e("#"+o).fadeIn(100)});i.on("mouseleave",function(){e("#"+o).remove()})})}})})(jQuery)